class a{constructor(t,i,s){this.x=t,this.y=i,this.velocity=s}update(){return this.y=this.y+this.velocity,!(this.y<-10)}display(t){this.velocity<0?t.fill(127,54,255):t.fill(255,54,127),t.rect(this.x,this.y,5,10)}}class d{constructor(t){this.x=t.width/2,this.bullets=[],this.health=2,this.d=20,this.lastShot=t.millis()}move(t,i){this.x+=i,this.x<10?this.x=10:this.x>t.width-10&&(this.x=t.width-10)}shoot(t){t.millis()-this.lastShot>250&&(this.bullets.push(new a(this.x,t.height-25,-3)),this.lastShot=t.millis())}update(t){const i=[];for(let s of this.bullets)if(!s.update())i.push(s);else for(let h of t)h.intersects(s)&&i.push(s);this.bullets=this.bullets.filter(s=>!i.includes(s))}intersects(t,i){const s=t.height-25,h=t.height-5,f=i.x>=this.x-this.d/2&&i.x<=this.x+this.d/2&&i.y>=s&&i.y<=h;return f&&(this.health-=1),f}display(t){if(this.health>0){this.health>1?t.fill(102,255,102):t.fill(255,255,102),t.rect(this.x,t.height-15,this.d,this.d);for(let i of this.bullets)i.display(t)}}}class u{constructor(t,i,s,h){this.x=i,this.y=s,this.r=10,this.bullets=[],this.nextShot=t.millis()+t.random(8e3)+4e3,this.isDead=!1,this.velocity=h}update(t,i){const s=[];for(let h of this.bullets)h.update()?i.intersects(t,h)&&s.push(h):s.push(h);this.bullets=this.bullets.filter(h=>!s.includes(h)),t.millis()>this.nextShot&&this.shoot(t),this.x+=this.velocity}shiftDown(){this.y+=20,this.velocity=-this.velocity,this.x+=this.velocity}shoot(t){this.isDead||(this.bullets.push(new a(this.x,this.y+this.r,2)),this.nextShot=t.millis()+t.random(8e3)+4e3)}intersects(t){if(this.isDead)return;const i=Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y));return this.isDead=i<this.r,this.isDead}display(t){this.isDead||(t.fill(153,0,0),t.ellipse(this.x,this.y,this.r*2,this.r*2));for(let i of this.bullets)i.display(t)}}const n=3;let l,e,r;function c(){this.createCanvas(400,400),this.rectMode(this.CENTER),this.ellipseMode(this.CENTER),this.noStroke(),e=[],r=!1,l=new d(this);const o=this.width/(n+1);for(let t=0;t<6;t++){const i=t%2===0,s=i?n:n-1;for(let h=0;h<s;h++)e.push(new u(this,o*(h+1)+(i?0:o/2),t*20+30,1))}}function y(){const o=e.filter(s=>!s.isDead&&s.y>this.height-50);if(l.health<=0||o.length>0){this.textAlign(this.CENTER,this.CENTER),this.textSize(96),this.fill(255),this.text("GAME OVER",this.width/2,this.height/2);return}if(e.filter(s=>!s.isDead).length===0){this.textAlign(this.CENTER,this.CENTER),this.textSize(96),this.fill(255),this.text("YOU WIN!",this.width/2,this.height/2);return}if(this.background(26),this.keyIsDown(this.RIGHT_ARROW)?l.move(this,2):this.keyIsDown(this.LEFT_ARROW)&&l.move(this,-2),e.filter(s=>!s.isDead&&(s.x<10||s.x>this.width-10)).length>0)for(let s of e)s.shiftDown();if(!r){if(e.filter(h=>!h.isDead&&h.y>this.height/1.9).length>0)for(let h of e)h.velocity*=2;r=!0}l.update(e);for(let s of e)s.update(this,l);l.display(this);for(let s of e)s.display(this)}function x(){this.keyCode===this.UP_ARROW&&l.shoot(this)}export{y as draw,x as keyPressed,c as setup};

import{a as m}from"./index-CrEXxzao.js";class V{constructor(t,s){this.pos=t,this.dir=s}}class k{constructor(t,s,h){this.pos=t.createVector(s,h),this.rays=[];for(let i=0;i<360;i+=3)this.rays.push(new V(this.pos,m.Vector.fromAngle(t.radians(i))))}move(t,s){this.pos.set(t,s)}display(t){t.ellipse(this.pos.x,this.pos.y,10,10)}intersect(t,s){for(let h of this.rays){let i=1/0,e;for(let p of s){const o=p.intersect(t,h);if(o){const r=this.pos.dist(o);r<i&&(i=r,e=o)}}e&&t.line(this.pos.x,this.pos.y,e.x,e.y)}}}class a{constructor(t,s,h,i,e){this.p1=t.createVector(s,h),this.p2=t.createVector(i,e)}display(t){t.line(this.p1.x,this.p1.y,this.p2.x,this.p2.y)}intersect(t,s){const h=s.pos.x,i=s.pos.y,e=s.pos.x+s.dir.x*1e-4,p=s.pos.y+s.dir.y*1e-4,o=this.p1.x,r=this.p1.y,x=this.p2.x,w=this.p2.y,d=(h-e)*(r-w)-(i-p)*(o-x);if(d===0)return;const g=-((h-e)*(i-r)-(i-p)*(h-o))/d;if(g<0||g>1)return;const f=((h-o)*(r-w)-(i-r)*(o-x))/d;if(!(f<0))return t.createVector(h+f*(e-h),i+f*(p-i))}}let c=[],l,y=0,u=1e4;function b(){this.createCanvas(400,400),this.strokeWeight(1);for(let n=0;n<5;n++)c.push(new a(this,this.random()*this.width,this.random()*this.height,this.random()*this.width,this.random()*this.height));c.push(new a(this,0,0,this.width,0)),c.push(new a(this,this.width,0,this.width,this.height)),c.push(new a(this,this.width,this.height,0,this.height)),c.push(new a(this,0,this.height,0,0)),l=new k(this,this.noise(y)*this.width,this.noise(u)*this.height)}function A(){this.background(0),y+=.003,u+=.003,l.move(this.noise(y)*this.width,this.noise(u)*this.height),this.stroke(255),l.intersect(this,c),this.stroke(0),this.fill(255),l.display(this);for(let n of c)n.display(this)}export{A as draw,b as setup};
